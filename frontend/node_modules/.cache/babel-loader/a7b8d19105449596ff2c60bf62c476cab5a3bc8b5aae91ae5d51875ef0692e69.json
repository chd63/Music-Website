{"ast":null,"code":"var _jsxFileName = \"/home/dev/fall2024/cs312/musicWebsite/frontend/src/user_pages/User.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from \"../AuthContext\";\nimport axios from \"axios\";\nimport { useNavigate } from 'react-router-dom';\nimport MusicPlayer from \"../MusicPlayer/MusicPlayer\"; // Import the MusicPlayer component\nimport \"./User.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction User() {\n  _s();\n  const ENDPOINT = process.env.REACT_APP_API_ENDPOINT;\n  const {\n    authToken,\n    id\n  } = useAuth();\n  const navigate = useNavigate();\n  const [userInfo, setUserInfo] = useState(null);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [songs, setSongs] = useState([]);\n  const [currentSongId, setCurrentSongId] = useState(null);\n  const requestData = {\n    id: id\n  };\n\n  // Fetch user profile and songs\n  useEffect(() => {\n    if (authToken === null) {\n      setErrorMessage(\"You are not signed in. Please log in to get song list.\");\n    } else {\n      setErrorMessage('');\n      handleSongCall();\n      UserProfile();\n    }\n  }, [authToken]);\n\n  // Fetch user's song list\n  const handleSongCall = async () => {\n    try {\n      const response = await axios.post(ENDPOINT + \"/api/songs/usersongs\", requestData);\n      if (response.data.message === \"Success\") {\n        setSongs(response.data.songs);\n      } else {\n        console.log(\"No songs found for this user\");\n      }\n    } catch (error) {\n      console.error(\"Error retrieving songs:\", error);\n    }\n  };\n\n  // Fetch user profile data (username)\n  const UserProfile = async () => {\n    try {\n      const response = await axios.get(ENDPOINT + `/api/users/read/${id}`);\n      if (response.status === 200) {\n        const username = response.data.userInfo.username;\n        setUserInfo(response.data); // Store the user profile data\n      }\n    } catch (error) {\n      if (error.response) {\n        setErrorMessage(error.response.data.message);\n      } else {\n        setErrorMessage(\"Error fetching user profile\");\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [!authToken && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"errorMessage\",\n      style: {\n        color: 'red'\n      },\n      children: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 28\n    }, this), userInfo ? /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [userInfo.userInfo.username, \"'s Song List\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading user profile...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"song-list\",\n      children: songs.length > 0 ? songs.map(song => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"song-block\",\n        onClick: () => setCurrentSongId(song.streamId) // Play song when the box is clicked\n        ,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: song.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: song.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 29\n        }, this)]\n      }, song.songId, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 25\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No songs to display\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), currentSongId && /*#__PURE__*/_jsxDEV(MusicPlayer, {\n      songId: currentSongId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 31\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n}\n_s(User, \"+iiOnea8NESbp74Yzd2I98EsSIo=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = User;\nexport default User;\nvar _c;\n$RefreshReg$(_c, \"User\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","axios","useNavigate","MusicPlayer","jsxDEV","_jsxDEV","User","_s","ENDPOINT","process","env","REACT_APP_API_ENDPOINT","authToken","id","navigate","userInfo","setUserInfo","errorMessage","setErrorMessage","songs","setSongs","currentSongId","setCurrentSongId","requestData","handleSongCall","UserProfile","response","post","data","message","console","log","error","get","status","username","children","className","style","color","fileName","_jsxFileName","lineNumber","columnNumber","length","map","song","onClick","streamId","title","description","songId","_c","$RefreshReg$"],"sources":["/home/dev/fall2024/cs312/musicWebsite/frontend/src/user_pages/User.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from \"../AuthContext\";\nimport axios from \"axios\";\nimport { useNavigate } from 'react-router-dom';\nimport MusicPlayer from \"../MusicPlayer/MusicPlayer\"; // Import the MusicPlayer component\nimport \"./User.css\";\n\nfunction User() {\n    const ENDPOINT = process.env.REACT_APP_API_ENDPOINT;\n    const { authToken, id } = useAuth();\n    const navigate = useNavigate();\n    const [userInfo, setUserInfo] = useState(null);\n    const [errorMessage, setErrorMessage] = useState('');\n    const [songs, setSongs] = useState([]);\n    const [currentSongId, setCurrentSongId] = useState(null);\n\n    const requestData = {\n        id: id\n    };\n\n    // Fetch user profile and songs\n    useEffect(() => {\n        if (authToken === null) {\n            setErrorMessage(\"You are not signed in. Please log in to get song list.\");\n        } else {\n            setErrorMessage('');\n            handleSongCall();\n            UserProfile();\n        }\n    }, [authToken]);\n\n    // Fetch user's song list\n    const handleSongCall = async () => {\n        try {\n            const response = await axios.post(ENDPOINT + \"/api/songs/usersongs\", requestData);\n            if (response.data.message === \"Success\") {\n                setSongs(response.data.songs);\n            } else {\n                console.log(\"No songs found for this user\");\n            }\n        } catch (error) {\n            console.error(\"Error retrieving songs:\", error);\n        }\n    };\n\n    // Fetch user profile data (username)\n    const UserProfile = async () => {\n        try {\n            const response = await axios.get(ENDPOINT + `/api/users/read/${id}`);\n            if (response.status === 200) {\n                const username = response.data.userInfo.username;\n                setUserInfo(response.data);  // Store the user profile data\n            }\n        } catch (error) {\n            if (error.response) {\n                setErrorMessage(error.response.data.message);\n            } else {\n                setErrorMessage(\"Error fetching user profile\");\n            }\n        }\n    };\n\n    return (\n        <div>\n            {!authToken && <p className=\"errorMessage\" style={{ color: 'red' }}>{errorMessage}</p>}\n\n            {userInfo ? (\n                <h1>{userInfo.userInfo.username}'s Song List</h1>\n            ) : (\n                <p>Loading user profile...</p>\n            )}\n\n            <div className=\"song-list\">\n                {songs.length > 0 ? (\n                    songs.map((song) => (\n                        <div \n                            key={song.songId} \n                            className=\"song-block\" \n                            onClick={() => setCurrentSongId(song.streamId)} // Play song when the box is clicked\n                        >\n                            <h2>{song.title}</h2>\n                            <p>{song.description}</p>\n                        </div>\n                    ))\n                ) : (\n                    <p>No songs to display</p>\n                )}\n            </div>\n\n            {/* MusicPlayer Component */}\n            {currentSongId && <MusicPlayer songId={currentSongId} />}\n        </div>\n    );\n\n}\n\nexport default User;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}