{"ast":null,"code":"var _jsxFileName = \"/home/dev/fall2024/cs312/musicWebsite/frontend/src/user_pages/User.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from \"../AuthContext\";\nimport axios from \"axios\";\nimport { Link, useNavigate } from 'react-router-dom';\nimport MusicPlayer from \"../MusicPlayer/MusicPlayer\"; // Import the MusicPlayer component\nimport \"./User.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction User() {\n  _s();\n  const ENDPOINT = process.env.REACT_APP_API_ENDPOINT;\n  const {\n    authToken,\n    id\n  } = useAuth();\n  const navigate = useNavigate(); // You can use this to navigate if needed.\n\n  const requestData = {\n    id: id\n  };\n\n  // error messages and songs\n  const [errorMessage, setErrorMessage] = useState('');\n  const [songs, setSongs] = useState([]);\n  const [currentSongId, setCurrentSongId] = useState(null); // To store the song ID for playing\n\n  // Effect to set error message based on authToken\n  useEffect(() => {\n    if (authToken === null) {\n      setErrorMessage(\"You are not signed in. Please log in to get songlist.\");\n    } else {\n      setErrorMessage('');\n      handleSongCall();\n    }\n  }, [authToken]);\n  const handleSongCall = async () => {\n    try {\n      const response = await axios.post(ENDPOINT + \"/api/songs/usersongs\", requestData);\n      if (response.data.message === \"Success\") {\n        console.log(\"Songs retrieved successfully:\", response.data.songs);\n        setSongs(response.data.songs);\n      } else {\n        console.log(\"No songs found for this user\");\n      }\n    } catch (error) {\n      console.error(\"Error retrieving songs:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [!authToken && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"errorMessage\",\n      style: {\n        color: 'red'\n      },\n      children: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 28\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"song-list\",\n      children: songs.length > 0 ? songs.map(song => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"song-block\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"song-title\",\n          children: song.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"song-description\",\n          children: song.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"play-button\",\n          onClick: () => setCurrentSongId(song.songId),\n          children: \"Play\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 29\n        }, this)]\n      }, song.songId, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 25\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No songs to display\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), currentSongId && /*#__PURE__*/_jsxDEV(MusicPlayer, {\n      songId: currentSongId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 31\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n}\n_s(User, \"9Fhde54W2NJNW1N7rDtO0YlIOKw=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = User;\nexport default User;\nvar _c;\n$RefreshReg$(_c, \"User\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","axios","Link","useNavigate","MusicPlayer","jsxDEV","_jsxDEV","User","_s","ENDPOINT","process","env","REACT_APP_API_ENDPOINT","authToken","id","navigate","requestData","errorMessage","setErrorMessage","songs","setSongs","currentSongId","setCurrentSongId","handleSongCall","response","post","data","message","console","log","error","children","className","style","color","fileName","_jsxFileName","lineNumber","columnNumber","length","map","song","title","description","onClick","songId","_c","$RefreshReg$"],"sources":["/home/dev/fall2024/cs312/musicWebsite/frontend/src/user_pages/User.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from \"../AuthContext\";\nimport axios from \"axios\";\nimport { Link, useNavigate } from 'react-router-dom';\nimport MusicPlayer from \"../MusicPlayer/MusicPlayer\"; // Import the MusicPlayer component\nimport \"./User.css\";\n\nfunction User() {\n    const ENDPOINT = process.env.REACT_APP_API_ENDPOINT;\n    const { authToken, id } = useAuth();\n    const navigate = useNavigate(); // You can use this to navigate if needed.\n\n    const requestData = {\n        id: id\n    };\n\n    // error messages and songs\n    const [errorMessage, setErrorMessage] = useState('');\n    const [songs, setSongs] = useState([]);\n    const [currentSongId, setCurrentSongId] = useState(null); // To store the song ID for playing\n\n    // Effect to set error message based on authToken\n    useEffect(() => {\n        if (authToken === null) {\n            setErrorMessage(\"You are not signed in. Please log in to get songlist.\");\n        } else {\n            setErrorMessage('');\n            handleSongCall();\n        }\n    }, [authToken]);\n\n    const handleSongCall = async () => {\n        try {\n            const response = await axios.post(ENDPOINT + \"/api/songs/usersongs\", requestData);\n            if (response.data.message === \"Success\") {\n                console.log(\"Songs retrieved successfully:\", response.data.songs);\n                setSongs(response.data.songs);\n            } else {\n                console.log(\"No songs found for this user\");\n            }\n        } catch (error) {\n            console.error(\"Error retrieving songs:\", error);\n        }\n    };\n\n    return (\n        <div>\n            {!authToken && <p className=\"errorMessage\" style={{ color: 'red' }}>{errorMessage}</p>}\n            \n            {/* Song List */}\n            <div className=\"song-list\">\n                {songs.length > 0 ? (\n                    songs.map((song) => (\n                        <div className=\"song-block\" key={song.songId}>\n                            <h2 className=\"song-title\">{song.title}</h2>\n                            <p className=\"song-description\">{song.description}</p>\n                            <button className=\"play-button\" onClick={() => setCurrentSongId(song.songId)}>\n                                Play\n                            </button>\n                        </div>\n                    ))\n                ) : (\n                    <p>No songs to display</p>\n                )}\n            </div>\n\n            {/* MusicPlayer Component */}\n            {currentSongId && <MusicPlayer songId={currentSongId} />}\n        </div>\n    );\n}\n\nexport default User;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}